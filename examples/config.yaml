# AgentWire Configuration
# Copy to ~/.agentwire/config.yaml

# === Server Settings ===
server:
  host: "0.0.0.0"              # Bind to all interfaces
  port: 8765                    # HTTPS port
  ssl:
    cert: "~/.agentwire/cert.pem"
    key: "~/.agentwire/key.pem"

  # Public URL for clients (when behind proxy or on different network)
  # public_url: "https://myserver.local:8765"

# === Projects Directory ===
projects:
  dir: "~/projects"
  worktrees:
    enabled: true               # Use git worktrees for parallel sessions
    suffix: "-worktrees"        # ~/projects/myapp-worktrees/
    auto_create_branch: true    # Create branch if it doesn't exist

# === Text-to-Speech ===
tts:
  # Backend: chatterbox | elevenlabs | none
  backend: "chatterbox"

  # TTS server URL - can be local or remote
  url: "http://localhost:8100"
  # Remote example: url: "http://gpu-server:8100"

  # Default voice settings
  default_voice: "default"
  exaggeration: 0.5            # 0-1, voice expressiveness
  cfg_weight: 0.5              # 0-1, voice consistency

# === Speech-to-Text ===
stt:
  # Backend options by platform:
  #   macOS: whisperkit (recommended), whispercpp, openai
  #   Linux: whispercpp, openai
  #   Any:   openai (requires API key)
  backend: "whisperkit"

  # Local model path (for whisperkit/whispercpp)
  model_path: "~/models/whisperkit/large-v3"

  # Language for transcription
  language: "en"

# === Agent Command ===
agent:
  # Command to start AI agent in new sessions
  # Placeholders: {name}, {path}, {model}
  command: "claude --dangerously-skip-permissions"

# === Service Locations (Network Topology) ===
# Define where each service runs. For single-machine setups,
# leave machine as null (or omit entirely) - no tunnels needed.
services:
  # Portal (web UI, WebSocket server)
  portal:
    machine: null               # null = runs on this machine
    port: 8765
    health_endpoint: "/health"

  # TTS server (Chatterbox voice synthesis)
  tts:
    machine: null               # null = runs locally
    port: 8100
    health_endpoint: "/health"
    # For remote TTS on GPU server, use:
    # machine: "gpu-server"     # Must exist in machines.json

# === Remote Machines Registry ===
machines:
  file: "~/.agentwire/machines.json"

# === Room Configurations ===
rooms:
  file: "~/.agentwire/rooms.json"

# === Image Uploads ===
uploads:
  # Directory for uploaded images (should be accessible from all machines)
  dir: "~/.agentwire/uploads"

  # Maximum file size in MB
  max_size_mb: 10

  # Auto-cleanup: delete files older than N days (0 = disabled)
  cleanup_days: 7
