# AgentWire TTS Server Dockerfile
# For GPU support, use nvidia/cuda base image
FROM python:3.12-slim

WORKDIR /app

# Install chatterbox TTS
RUN pip install --no-cache-dir chatterbox-tts

# Create voices directory
RUN mkdir -p /app/voices

# Environment
ENV CHATTERBOX_PORT=8100
ENV CHATTERBOX_HOST=0.0.0.0

# Expose port
EXPOSE 8100

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=30s --retries=3 \
    CMD curl -f http://localhost:8100/voices || exit 1

# Run TTS server
CMD ["chatterbox", "serve", "--host", "0.0.0.0", "--port", "8100"]
